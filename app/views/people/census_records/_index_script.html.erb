<script type="text/javascript">
document.addEventListener('DOMContentLoaded', (event) => {
  $('#new_s').advancedSearch({
    url: '<%= File.join(url_for().sub(/\/unhoused|\/unreviewed/, ''), 'advanced_search_filters.json') -%>',
    cache: true,
    timestamp: <%== AdvancedSearchFilterTimestamp.call(resource_class) -%>,
    fields: <%== @search.f.to_json.html_safe -%>,
    filters: <%== @search.s.to_json.html_safe -%>,
    sorts: <%== @search.sorts.to_json.html_safe -%>
  });

  new agGrid.Grid(document.querySelector('#census-records'), {
    components: {
      actionCellRenderer: ActionCellRenderer,
      nameCellRenderer: NameCellRenderer,
    },
    columnDefs: <%= @search.column_def.to_json.html_safe -%>,
    defaultColDef: { width: 100 },
    rowData: <%== @search.row_data(@records).to_json.html_safe -%>,
    rowSelection: 'single'
  });
});


</script>